
@{
    ViewBag.Title = "Proses";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">-</h4>
            </div>
            <div class="modal-body">
                <div class="form-horizontal">
                    <input type="hidden" id="MonitoringId" />
                    <div class="form-group">
                        <div class="col-sm-6">
                            <label class="control-label">Follow Up</label>
                            <select required id="Keterangan" data-placement="choose" class="form-control select2"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-6">
                            <label class="control-label">Follow Up Tambahan</label>
                            <textarea id="keterangan" class="form-control" style="resize:none;height:30px"></textarea>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-5">
                            <label class="control-label">Tgl TestKey</label>
                            <input class="form-control" type="date" id="tgl" />
                        </div>
                        <div class="col-sm-5">
                            <label class="control-label">Nomor TestKey</label>
                            <input class="form-control" id="Testkey" />
                        </div>
                        <div class="col-sm-1">
                            <a class="btn btn-success text-white btn-sm" id="add">< class="fa fa-plus"></i></a>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-5">
                            <label class="control-label">Keterangan TestKey</label>
                            <input class="form-control" id="TestkeyDesc"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12">
                        <table class="table table-responsive" id="detailItems">
                            <thead>
                                <tr>
                                    <td>Tgl TestKey</td>
                                    <td>No TestKey</td>
                                    <td>Keterangan</td>
                                    <td>$nbsp;</td>
                                </tr>
                            </thead>
                            <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Tutup</button>
            <button type="button" class="btn btn-infi" id="" onclick="AddTestKey();">Ubah</button>
            <button type="button" class="btn btn-primary" id="update" onclick="Update();">Selesai</button>
        </div>
        </div>
    </div>
</div>

<div class="card" style="background-color:white">
    <div class="card-header card-header-info">
        <h2 class="card-title">Proses</h2>
        <p class="card-category">Transaksi RTGS Belum Selesai</p>
    </div>
    <div class="card-body">
        <div class="row" style="margin-left:20px;margin-bottom:20px">
            <label class="bmd-label-floating">Tipe Surat</label>
            <div class="col-md-4">
                <select required id="tipe" data-placement="choose" class="form-control select2 tipe"></select>
            </div>
        </div>
        <table id="table" class="table-bordered table-info">
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Tipe Surat</th>
                    <th>Tanggal</th>
                    <th>Cabang</th>
                    <th>Nomor Surat / Ni / Memo</th>
                    <th>TRN</th>
                    <th>REL TRN</th>
                    <th>Bank Tujuan</th>
                    <th>Nominal</th>
                    <th>Durasi</th>
                    <th>Aksi</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

@section scripts {
<script>
    
     $(document).ready(function() {
        read();
    })
    
    function read() {
        var t = $("#table").DataTable({
            "ajax": {
                "url": "@Url.Action("GetAll","Kliring")",
                "type": "Get",
                "datatype": "json"
            },
            "columns": [
                { "data": null },
                { "data": "TipeSurat" },
                { "data": "Tanggal" },
                { "data": "Cabang" },
                { "data": "NomorSurat" },
                { "data": "TRN" },
                { "data": "RelTRN" },
                { "data": "BankTujuan" },
                { "data": "Nominal" },
                { "data": "Durasi" },
                {
                    "render": function(data, type, row) {
                        return "<button class='btn btn-primary btn-sm text-white' onclick=GetById('" + row.id + "');><i class='fas fa-edit'></i></button> " +
                                        "<button class='btn btn-danger btn-sm text-white' onclick = Delete('" + row.id + "');><i class='fa fa-trash'></i></button>" ;
                                        },
                                        },
                                        ]
                                        })
                                        t.on('order.dt search.dt', function() {
                                        t.column(0, { search: 'applied' , order: 'applied' }).nodes().each(function(cell, i) {
                                        cell.innerHTML=i + 1;
                                        });
                                        }).draw();
                                        }

</script>
}