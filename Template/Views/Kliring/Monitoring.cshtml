@{
    ViewBag.Title = "Monitoring";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="content">
<div class="container">
        <div class="card" style="background-color:white">
            <div class="card-header " style="background-color:lightblue">
            <h2 class="card-title font-weight-bolder">Monitoring Kliring</h2>
            <p class="card-text">Transaksi Kliring</p>
        </div>
    <div class="card-body">
            <div class="row" style="margin-bottom:30px">
        <div class="col-md-2">
            <label class="bmd-label-floating"> Tanggal Start</label>
            <input id="Register" type="date" class="form-control-date" >
        </div>        
        <div class="col-md-2">
            <label class="bmd-label-floating"> Tanggal End</label>
            <input id="Register" type="date" class="form-control-date">
        </div>
                <div class="col-md-1">
                    <br />
                    <button class="btn btn-primary" onclick="">Filter</button>
                </div>
         </div>
       
            <table id="table" class="table ">
                <thead>
                    <tr>
                    <th>No.</th>
                    <th>Tanggal Register</th>
                    <th>Bank</th>
                    <th>No.Rekening</th>
                    <th>Nasabah Penerima.</th>
                    <th>Alasan</th>
                    <th>SLA(HK)</th>
                    <th>Tipe Transaksi</th>
                    <th>Action</th>
                        </tr>
                </thead>
            </table>
    </div>
</div>
</section>

@section scripts{

 <script>

      $(document).ready(function () {
            Read();
        });

    function Read() {
        var t = $("#table").DataTable({
            "ajax": {
                "url": "@Url.Action("Get","MonitoringRK")",
                "type": "GET",
                "datatype": "json"
            },
            "destroy": "true",
            "createdRow": function (row, data, index) {
                data[index];
                var Durasi = parseInt(data.durasi);
                $node = this.api().row(row).nodes().to$();
                if (Durasi < 5 && Durasi < 10) {
                    $('td', row).eq(7).addClass('success-bg');
                }
                else if (Durasi >= 5 && Durasi < 10) {
                    $('td', row).eq(7).addClass('warning-bg');
                }
                else if (Durasi >= 5 && Durasi >= 10) {
                    $('td', row).eq(7).addClass('danger-bg');
                }
            },
            "columns": [
                {
                    "render": function (data, type, row) {
                        return "<span class='badge pill-badge badge-success'>" + "Aman" + "</span>";
                    }
                },
                {
                    "render": function (data, type, row) {
                        return moment(row.tanggalSurat).locale('Id').format('LL');
                    }
                },
                { "data": "bankPengirim" },
                { "data": "nomorRekening" },
                {
                    "render": function (data, type, row) {
                        return "<span>" + pluskoma(row.nominal) + "</span>";
                    }
                },
                { "data": "nama" },
                { "data": "alasan" },
                //{ "data": "Durasi" },
                { "data": "durasi" },
                { "data": "tipe" },
                {
                    "render": function (data, type, row) {
                        return "<a class='btn btn-info btn-sm text-white' href='@Url.Action("DetailProgress", "MonitoringRK")/" + row.id + "'><i class='fa fa-eye'></i></a> ";
                    },

                },
            ]
        })
        t.on('order.dt search.dt', function () {
            t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                cell.innerHTML = i + 1;
            });
        }).draw();
    }
                </script>
                }